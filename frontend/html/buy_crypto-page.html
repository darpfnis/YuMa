<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>YuMa - Buy Crypto</title>
  <link rel="stylesheet" href="../css/buy_crypto-page.css">
  <link rel="stylesheet" href="../css/header.css">
  <link rel="stylesheet" href="../css/global.css">
  <link rel="stylesheet" href="../css/cards.css">
</head>
<body>

    <header>
        <div class="header-left">
            <div class="logo"><a href="../../index.html">YuMa</a></div>
            <nav class="main-nav">
                <a href="buy_crypto-page.html" class="active">Buy Crypto</a>
                <a href="markets.html">Markets</a>
                <div class="dropdown-container">
                    <a href="#" class="nav-link dropdown-toggle">Trade</a>
                    <div class="dropdown-content trade-dropdown">
                        <div class="dropdown-column">
                            <a href="spot-page.html">Spot</a>
                            <a href="#">Margin</a>
                            <a href="#">P2P</a>
                            <a href="#">Convert & Block Trade</a>
                        </div>
                    </div>
                </div>
                <div class="dropdown-container">
                    <a href="#" class="nav-link dropdown-toggle">Futures</a>
                    <div class="dropdown-content futures-dropdown">
                        <a href="futures-page.html">USDⓈ-M Futures</a>
                        <a href="#">COIN-M Futures</a>
                        <a href="#">Options</a>
                        <a href="#">Leaderboard</a>
                    </div>
                </div>
                <a href="faq.html">FAQ</a>
            </nav>
        </div>
        <nav class="user-nav">
            <a href="sign_up-page.html" id="signUpLinkBuyCrypto">Sign up</a>
            <a href="login-page.html" id="loginLinkBuyCrypto">Log in</a>
            <a href="profile.html" id="profileLinkBuyCrypto" style="display: none;" title="My Profile">Profile</a>
            <a href="#" id="logoutButtonBuyCrypto" class="nav-button" style="display: none;">Log out</a>
        </nav>
    </header>

      <!-- КОНТЕЙНЕР ДЛЯ ДЕКОРАТИВНИХ SVG ЕЛЕМЕНТІВ -->
    <div class="background-svg-decorations">
        <img src="../resources/13.svg" alt="Top Left Blob Decoration" class="decor-element decor-blob-tl">
        <img src="../resources/15.svg" alt="Top Left Ring Decoration" class="decor-element decor-ring-tl">
        <img src="../resources/14.svg" alt="Bottom Right Blob Decoration" class="decor-element decor-blob-br">
        <img src="../resources/16.svg" alt="Bottom Right Ring Decoration" class="decor-element decor-ring-br">
    </div>

<main class="trading-main-layout">
    <div class="left-column">
        <div class="card main-action-card card-base">
            <!-- TradingView Widget BEGIN -->
<div class="tradingview-widget-container">
    <div class="tradingview-widget-container__widget"></div>
    <div class="tradingview-widget-copyright">
      <a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank">
      </a>
    </div>
    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-quotes.js" async>
    {
      "width": "100%",
      "height": "100%",
      "symbolsGroups": [
        {
          "name": "Crypto",
          "symbols": [
            { "name": "BINANCE:BTCUSDT", "displayName": "Bitcoin" },
            { "name": "BINANCE:ETHUSDT", "displayName": "Ethereum" },
            { "name": "BINANCE:XRPUSDT", "displayName": "XRP" },
            { "name": "BINANCE:SOLUSDT", "displayName": "Solana" },
            { "name": "BINANCE:BNBUSDT", "displayName": "BNB" },
            { "name": "BINANCE:ADAUSDT", "displayName": "Cardano" },
            { "name": "BINANCE:DOGEUSDT", "displayName": "Dogecoin" },
            { "name": "BINANCE:SUIUSDT", "displayName": "SUI" },
            { "name": "BINANCE:SEIUSDT", "displayName": "SEI" },
            { "name": "BINANCE:AVAXUSDT", "displayName": "Avalanche" },
            { "name": "BINANCE:DOTUSDT", "displayName": "Polkadot" },
            { "name": "BINANCE:SHIBUSDT", "displayName": "Shiba Inu" },
            { "name": "BINANCE:TRXUSDT", "displayName": "TRON" },
            { "name": "BINANCE:LINKUSDT", "displayName": "Chainlink" },
            { "name": "BINANCE:ATOMUSDT", "displayName": "Cosmos" },
            { "name": "BINANCE:NEARUSDT", "displayName": "NEAR Protocol" },
            { "name": "BINANCE:APTUSDT", "displayName": "Aptos" },
            { "name": "BINANCE:OPUSDT", "displayName": "Optimism" },
            { "name": "BINANCE:ARBUSDT", "displayName": "Arbitrum" },
            { "name": "BINANCE:ICPUSDT", "displayName": "Internet Computer" },
            { "name": "BINANCE:FILUSDT", "displayName": "Filecoin" }
          ]
        }
      ],
      "showSymbolLogo": true,
      "isTransparent": false,
      "colorTheme": "dark",
      "locale": "en"
    }
    </script>
  </div>
  <!-- TradingView Widget END -->
  
        </div>
    </div>
    <div class="right-column">
        <div class="buy-sell-overlap-group">
            <div class="card buy-card-overlapper card-base">
                Buy
                <div class="input-field-group">
                    <label for="spend-amount-buy">Spend</label>
                    <div class="input-wrapper">
                        <input type="number" id="spend-amount-buy" placeholder="0.00" step="any">
                        <div class="currency-selector">
                            <span>USD</span>
                            <span class="dropdown-arrow">▼</span>
                        </div>
                    </div>
                </div>
                <div class="input-field-group">
                    <label for="receive-amount-buy">Receive</label>
                    <div class="input-wrapper">
                        <input type="number" id="receive-amount-buy" placeholder="0.000000" step="any">
                        <div class="currency-selector">
                            <span>BTC</span>
                            <span class="dropdown-arrow">▼</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card sell-card-overlapped card-base">
                Sell
                <div class="input-field-group">
                    <label for="spend-amount-sell">Spend</label>
                    <div class="input-wrapper">
                        <input type="number" id="spend-amount-sell" placeholder="0.000000" step="any">
                        <div class="currency-selector">
                            <span>BTC</span>
                            <span class="dropdown-arrow">▼</span>
                        </div>
                    </div>
                </div>
                <div class="input-field-group">
                    <label for="receive-amount-sell">Receive</label>
                    <div class="input-wrapper">
                        <input type="number" id="receive-amount-sell" placeholder="0.00" step="any">
                        <div class="currency-selector">
                            <span>USD</span>
                            <span class="dropdown-arrow">▼</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="payment-buttons-container">
            <button class="main-page-button">Payment Method</button>
            <button class="main-page-button">BUY</button>
        </div>
    </div>
</main>

<script>
// --- START: Auth UI Logic (for header on Buy Crypto page) ---
function updateHeaderAuthStateBuyCrypto() {
    const token = localStorage.getItem('authToken');
    const signUpLink = document.getElementById('signUpLinkBuyCrypto');
    const loginLink = document.getElementById('loginLinkBuyCrypto');
    const profileLink = document.getElementById('profileLinkBuyCrypto');
    const logoutButton = document.getElementById('logoutButtonBuyCrypto');

    if (token) {
        if (signUpLink) signUpLink.style.display = 'none';
        if (loginLink) loginLink.style.display = 'none';
        if (profileLink) profileLink.style.display = 'inline-block';
        if (logoutButton) logoutButton.style.display = 'inline-block';
    } else {
        if (signUpLink) signUpLink.style.display = 'inline-block';
        if (loginLink) loginLink.style.display = 'inline-block';
        if (profileLink) profileLink.style.display = 'none';
        if (logoutButton) logoutButton.style.display = 'none';
    }
}

function setupLogoutButtonBuyCrypto() {
    const logoutButton = document.getElementById('logoutButtonBuyCrypto');
    if (logoutButton) {
        // Запобігання додаванню кількох обробників подій
        if (!logoutButton.dataset.listenerAttached) {
            logoutButton.addEventListener('click', async (event) => {
                event.preventDefault();
                const currentTokenForLogout = localStorage.getItem('authToken');
                localStorage.removeItem('authToken');
                
                updateHeaderAuthStateBuyCrypto(); 

                try {
                    // Припускаємо, що кінцева точка /auth/logout є універсальною
                    if (currentTokenForLogout) {
                        await fetch('/auth/logout', { // Шлях до вашого API виходу
                            method: 'POST',
                            headers: { 'Authorization': `Bearer ${currentTokenForLogout}` }
                        });
                    }
                } catch (e) {
                    console.error('Logout API error', e);
                }
                // Перенаправлення на сторінку входу
                window.location.href = 'login-page.html'; // Переконайтесь, що шлях правильний
            });
            logoutButton.dataset.listenerAttached = 'true';
        }
    }
}
// --- END: Auth UI Logic ---

document.addEventListener('DOMContentLoaded', () => {
    console.log('[BuyCryptoPage] DOMContentLoaded. Auth script loaded.');
    updateHeaderAuthStateBuyCrypto();
    setupLogoutButtonBuyCrypto();

    // Тут може бути інший JavaScript, специфічний для сторінки buy_crypto-page.html
});
</script>

</body>
</html>
